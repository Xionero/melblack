<!DOCTYPE html>
<html>
<head>
  <title>NES Emulator</title>
  <style>
    #gameCanvas {
      image-rendering: pixelated; /* ทำให้ภาพคมชัด */
    }
  </style>
  <script type="text/javascript" src="https://cdn.rawgit.com/takahirox/nes-js/v0.0.1/build/nes.min.js"></script>
  <script type="text/javascript">
    function init() {
      // **เปลี่ยนตรงนี้เป็น URL ของไฟล์ ROM ของคุณ**
      var url = 'Contra.nes'; // ตัวอย่าง: ไฟล์อยู่ในโฟลเดอร์เดียวกับ HTML

      var request = new XMLHttpRequest();
      request.responseType = 'arraybuffer';

      request.onload = function() {
        if (request.status === 200) {
          var buffer = request.response;
          var nes = new NesJs.Nes();

          nes.setRom(new NesJs.Rom(buffer));
          nes.setDisplay(new NesJs.Display(document.getElementById('gameCanvas')));
          nes.setAudio(new NesJs.Audio());

          window.onkeydown = function(e) { nes.handleKeyDown(e); };
          window.onkeyup = function(e) { nes.handleKeyUp(e); };

          nes.bootup();
          nes.run();
        } else {
          console.error('Error loading ROM: Status code ' + request.status);
        }
      };

      request.onerror = function() {
        console.error('Network error loading ROM.');
      };

      request.open('GET', url, true);
      request.send(null);
    }
  </script>
</head>

<body onload="init()">
  <p>
    <canvas id="gameCanvas" width="256" height="240"></canvas>
  </p>
</body>
</html>